webpackJsonp([1],{"1Juo":function(t,a){},"2mV7":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("gNcp"),i={};s.keys().forEach(function(t){"./index.js"!==t&&(i[t.replace(/(\.\/|\.js)/g,"")]=s(t).default)}),a.default=i},"8Z7i":function(t,a,e){"use strict";(function(t){a.a=function(){var a=void 0,e=void 0,s=void 0,i=void 0;return n=document.createElement("_"),r=n.style,o=void 0,""===r[o="webkitTransition"]&&(s="webkitTransitionEnd",e=o),""===r[o="transition"]&&(s="transitionend",e=o),""===r[o="webkitTransform"]&&(a=o),""===r[o="msTransform"]&&(a=o),""===r[o="transform"]&&(a=o),document.body.insertBefore(n,null),r[a]="translate3d(0, 0, 0)",i=!!t.getComputedStyle(n).getPropertyValue(a),document.body.removeChild(n),{transform:a,transition:e,transitionEnd:s,hasTranslate3d:i};var n,r,o}}).call(a,e("DuR2"))},"8lmO":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i=e("KW+s"),n=e.n(i),r={getTrade:function(t){var a=t.commit,e=t.rootState.User.user_id;s.a.http.post(n.a+"/api/deal/list",{user_id:e}).then(function(t){if(t.data.success){var s=t.data.result.deals;s&&a("UPDATE_TRADE_LIST",{tradeList:s,userId:e})}})},createDeal:function(t,a){t.commit;var e=t.rootState,i=t.dispatch,r=a.stampIds,o=a.price,c={user_id:e.User.user_id,stamp_ids:r,price:o};s.a.http.post(n.a+"/api/deal/create",c).then(function(t){t.data.success&&(i("getAlbum"),i("getTrade"))})},cancelTrade:function(t,a){t.commit;var e=t.rootState,i=t.dispatch,r={user_id:e.User.user_id,id:a};s.a.http.post(n.a+"/api/deal/destroy",r).then(function(t){t.data.success&&(i("getAlbum"),i("getTrade"))})},acceptTrade:function(t,a){t.commit;var e=t.rootState,i=t.dispatch,r={user_id:e.User.user_id,deal_id:a};s.a.http.post(n.a+"/api/deal/accept",r).then(function(t){t.data.success&&(i("getAlbum"),i("getTrade"))})}};a.default={state:{tradeList:[],sellListSingle:[],sellListAlbum:[],buyListSingle:[],buyListAlbum:[],hotStamps:[]},mutations:{UPDATE_TRADE_LIST:function(t,a){var e=a.tradeList,s=a.userId;e=e.filter(function(t){return t.stamps}).sort(function(t,a){return a.atlas_id-t.atlas_id}).filter(function(t){return 1===t.status}),t.tradeList=e,t.sellListSingle=e.filter(function(t){return t.create_user_id===s&&1===t.stamps.length}),t.sellListAlbum=e.filter(function(t){return t.create_user_id===s&&t.stamps.length>1}),t.buyListSingle=e.filter(function(t){return t.create_user_id!==s&&1===t.stamps.length}),t.buyListAlbum=e.filter(function(t){return t.create_user_id!==s&&t.stamps.length>1});var i={};for(var n in t.hotStamps=[],t.buyListSingle)null==i[t.buyListSingle[n].atlas_id]&&(i[t.buyListSingle[n].atlas_id]=t.buyListSingle[n]);for(var r in i)t.hotStamps.push(i[r])}},actions:r}},Chds:function(t,a){},EOWH:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("KW+s"),i=e.n(s),n=e("7+uW"),r={refreshCoin:function(t){var a=t.commit;setTimeout(function(){a("INCREMENT_COINS",1)},500),setTimeout(function(){a("REDUCE_COINS",1)},501)},coinIncrease:function(t,a){(0,t.commit)("INCREMENT_COINS",a)},ingotIncrease:function(t,a){(0,t.commit)("INCREMENT_INGOTS",a)},listChests:function(t,a){var e=t.commit,s={user_id:t.rootState.User.user_id};n.a.http.post(i.a+"/api/chest/list",s).then(function(t){t.data.success&&(e("UPDATE_CHESTS",t.data.result.chests),e("UPDATE_INGOTS",t.data.result.ingots))})},syncChest:function(t,a){t.commit;var e={user_id:t.rootState.User.user_id,chests:[a]};n.a.http.post(i.a+"/api/chest/sync",e).then(function(t){console.log(t.data)})}};a.default={state:{coins:0,ingots:0,chests:[{hour:0,ingots:0,opened:!0}]},mutations:{INCREMENT_COINS:function(t,a){t.coins+a>999999?t.coins=999999:t.coins+=a},REDUCE_COINS:function(t,a){t.coins-=a},UPDATE_COINS:function(t,a){a>999999&&(a=999999),t.coins=a},INCREMENT_INGOTS:function(t,a){t.ingots+=a},UPDATE_INGOTS:function(t,a){t.ingots=a},UPDATE_CHESTS:function(t,a){t.chests=a}},actions:r}},El6M:function(t,a){},"KW+s":function(t,a,e){t.exports=""},Ktz1:function(t,a){},MqPO:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={state:{main:0,version:"1.0",user_id:1,token:0},mutations:{DECREMENT_MAIN_COUNTER:function(t){t.main--},INCREMENT_MAIN_COUNTER:function(t,a){t.main+=a}},actions:{someAsyncTask:function(t,a){(0,t.commit)("INCREMENT_MAIN_COUNTER",a)}}}},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"tabbar"},[e("div",{staticClass:"tab-item",class:"dig"==t.currentTab?"active":null,on:{click:function(a){t.tabClick("dig")}}},[e("div",{staticClass:"tabicon dig"}),t._v(" "),e("span",[t._v("挖一挖")])]),t._v(" "),e("div",{staticClass:"tab-item",class:"album"==t.currentTab?"active":null,on:{click:function(a){t.tabClick("album")}}},[e("div",{staticClass:"tabicon album"}),t._v(" "),e("span",[t._v("集邮册")])]),t._v(" "),e("div",{staticClass:"tab-item",class:"slide"==t.currentTab?"active":null,on:{click:function(a){t.tabClick("slide")}}},[e("div",{staticClass:"tabicon slide center"}),t._v(" "),e("span",[t._v("划一划")])]),t._v(" "),e("div",{staticClass:"tab-item",class:"trade"==t.currentTab?"active":null,on:{click:function(a){t.tabClick("trade")}}},[e("div",{staticClass:"tabicon trade"}),t._v(" "),e("span",[t._v("交易所")])]),t._v(" "),e("div",{staticClass:"tab-item",class:"user"==t.currentTab?"active":null,on:{click:function(a){t.tabClick("user")}}},[e("div",{staticClass:"tabicon user"}),t._v(" "),e("span",[t._v("我的号")])])])},staticRenderFns:[]};var n={name:"Tutorial",data:function(){return{show:!1,currentPage:0,tutorPages:["/static/ui/slide.tutorial1.jpg","/static/ui/slide.tutorial2.jpg","/static/ui/slide.tutorial3.jpg","/static/ui/slide.tutorial4.jpg","/static/ui/slide.tutorial5.jpg","/static/ui/slide.tutorial6.jpg"]}},computed:{currentPageImg:function(){return this.currentPage<6?this.tutorPages[this.currentPage]:""},finish:function(){return this.currentPage>5}},methods:{pageClick:function(){this.currentPage++,localStorage.setItem("tutorShowed","showed")}},mounted:function(){localStorage.getItem("tutorShowed")||(this.show=!0)}},r={render:function(){var t=this.$createElement,a=this._self._c||t;return this.show?a("div",{staticClass:"tutorial",class:this.finish?"hide":null},[a("img",{staticClass:"tutorial-page",attrs:{src:this.currentPageImg,alt:""},on:{click:this.pageClick}})]):this._e()},staticRenderFns:[]};var o={name:"App",components:{Tabbar:e("VU/8")({name:"Tabbar",data:function(){return{currentTab:"slide"}},methods:{tabClick:function(t){this.currentTab=t;var a="slide"===t?"/":t;this.$router.push({path:a})}},mounted:function(){this.currentTab=this.$router.history.current.name}},i,!1,function(t){e("El6M")},"data-v-13a1ed43",null).exports,Tutorial:e("VU/8")(n,r,!1,function(t){e("vkA4")},"data-v-e4b6fb5c",null).exports}},c={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view"),this._v(" "),a("Tabbar"),this._v(" "),a("Tutorial")],1)},staticRenderFns:[]};var l=e("VU/8")(o,c,!1,function(t){e("oUd5")},null,null).exports,u=e("/ocq"),p=e("8Z7i"),d={name:"StampWrap",props:{imgSrc:String,level:Number,frame:Boolean,type:String,padding:Number,vPadding:Number,lock:{type:Boolean,value:!1},stamp:Object},data:function(){return{ratio:0,width:0,height:0}},mounted:function(){this.computeSize()},watch:{imgSrc:function(t,a){var e=this;setTimeout(function(){e.computeSize()},500)}},computed:{dirtBrightness:function(){return this.stamp?this.stamp.brightness?"opacity:"+(1-this.stamp.brightness/2.5):0:null},dirtCrack:function(){if(!this.stamp)return null;if(this.stamp.crack){for(var t=this.stamp.crack,a=0;t>0;)a++,t-=.25;return"opacity:"+this.stamp.crack/1.5+";background-image:url(/static/ui/dirt/dirtCracks.0"+a+".png)"}return null},dirtStain:function(){if(!this.stamp)return null;if(this.stamp.stain){for(var t=this.stamp.stain,a=0;t>0;)a++,t-=1/8;return"opacity:"+this.stamp.crack/1.5+";background-image:url(/static/ui/dirt/dirtSplash.0"+a+".png)"}return null},dirtMark:function(){if(!this.stamp)return null;if(this.stamp.mark){for(var t=this.stamp.mark,a=0;t>0;)a++,t-=1/6;return"opacity:"+this.stamp.crack/1.5+";background-image:url(/static/ui/dirt/dirtStamp.0"+a+".png)"}return null},frameClass:function(){var t="white";return this.level<=60?t="black":this.level<=70?t="blue":this.level<=80?t="red":this.level<=90?t="sliver":this.level<=100&&(t="gold"),t},maskOpacity:function(){var t=1;return this.level<=60?t=1:this.level<=70?t=.6+(this.level-60)/10*.4:this.level<=80?t=.6+(this.level-70)/10*.4:this.level<=90?t=.6+(this.level-80)/10*.4:this.level<=100&&(t=.6+(this.level-90)/10*.4),1-t}},methods:{computeSize:function(){var t=this,a=new Image;a.onload=function(){t.ratio||(t.ratio=this.width/this.height,t.setPosition())},a.src=this.imgSrc,a.width&&a.height&&(t.ratio=a.width/a.height,t.setPosition())},setPosition:function(){var t=this.padding?this.padding:16,a=this.vPadding?this.vPadding:t,e=this.$refs.sizer.clientWidth-2*t,s=this.$refs.sizer.clientHeight-2*a,i=this.$refs.figure;i.style.margin="auto",i.style.position="relative",i.style.width="",this.ratio>e/s?i.style.width=e+"px":i.style.width=s*this.ratio+"px",i.style.transition="all 0.2s ease-in-out",i.style.opacity="1"}}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"stamp-sizer"},[e("figure",{ref:"figure",staticClass:"stamp-wrap",class:[t.frame?null:"no-frame",t.type,t.lock?"lock":null]},[e("img",{staticClass:"stamp-img",style:t.dirtBrightness,attrs:{src:t.imgSrc,alt:""}}),t._v(" "),e("div",{staticClass:"stamp-frame top"}),t._v(" "),e("div",{staticClass:"stamp-frame bottom"}),t._v(" "),e("div",{staticClass:"stamp-frame right"}),t._v(" "),e("div",{staticClass:"stamp-frame left"}),t._v(" "),t.frame?e("div",{staticClass:"material-frame",class:t.frameClass},[e("div",{staticClass:"fr top"}),t._v(" "),e("div",{staticClass:"fr bottom"}),t._v(" "),e("div",{staticClass:"fr left"}),t._v(" "),e("div",{staticClass:"fr right"}),t._v(" "),e("div",{staticClass:"mask",style:"opacity: "+t.maskOpacity})]):t._e(),t._v(" "),t.level?e("div",{staticClass:"dirt"},[e("div",{staticClass:"crack",style:t.dirtCrack}),t._v(" "),e("div",{staticClass:"stain",style:t.dirtStain}),t._v(" "),e("div",{staticClass:"mark",style:t.dirtMark})]):t._e()]),t._v(" "),e("div",{ref:"sizer",staticClass:"sizer"})])},staticRenderFns:[]};var h=e("VU/8")(d,m,!1,function(t){e("uuwm")},null,null).exports,v={components:{StampWrap:h},props:{stackinit:Object,pages:Array},data:function(){return{basicdata:{start:{},end:{}},temporaryData:{prefixes:Object(p.a)(),offsetY:"",poswidth:0,posheight:0,lastPosWidth:"",lastPosHeight:"",rotate:0,lastRotate:0,visible:this.stackinit.visible||3,tracking:!1,animation:!1,currentPage:this.stackinit.currentPage||0,opacity:1,lastOpacity:0,swipe:!1,zIndex:10}}},computed:{offsetRatio:function(){var t=this.$el.offsetWidth,a=this.$el.offsetHeight,e=1-(t-Math.abs(this.temporaryData.poswidth))*(a-Math.abs(this.temporaryData.posheight))/(t*a)||0;return e>1?1:e},offsetWidthRatio:function(){var t=this.$el.offsetWidth;return 1-(t-Math.abs(this.temporaryData.poswidth))/t||0}},mounted:function(){var t=this;this.$on("next",function(){t.next()}),this.$on("prev",function(){t.prev()})},methods:{touchstart:function(t){if(!this.temporaryData.tracking){if("touchstart"===t.type){if(t.touches.length>1)return void(this.temporaryData.tracking=!1);this.basicdata.start.t=(new Date).getTime(),this.basicdata.start.x=t.targetTouches[0].clientX,this.basicdata.start.y=t.targetTouches[0].clientY,this.basicdata.end.x=t.targetTouches[0].clientX,this.basicdata.end.y=t.targetTouches[0].clientY,this.temporaryData.offsetY=0}else this.basicdata.start.t=(new Date).getTime(),this.basicdata.start.x=t.clientX,this.basicdata.start.y=t.clientY,this.basicdata.end.x=t.clientX,this.basicdata.end.y=t.clientY,this.temporaryData.offsetY=t.offsetY;this.temporaryData.tracking=!0,this.temporaryData.animation=!1}},touchmove:function(t){if(this.temporaryData.tracking&&!this.temporaryData.animation){"touchmove"===t.type?(this.basicdata.end.x=t.targetTouches[0].clientX,this.basicdata.end.y=t.targetTouches[0].clientY,this.temporaryData.offsetY=this.basicdata.end.y-this.basicdata.start.y):(this.basicdata.end.x=t.clientX,this.basicdata.end.y=t.clientY),this.temporaryData.poswidth=this.basicdata.end.x-this.basicdata.start.x,this.temporaryData.posheight=this.basicdata.end.y-this.basicdata.start.y;var a=this.rotateDirection(),e=this.angleRatio();this.temporaryData.rotate=a*this.offsetWidthRatio*15*e}},touchend:function(t){if(this.temporaryData.tracking=!1,this.temporaryData.animation=!0,this.offsetRatio>=.5){var a=Math.abs(this.temporaryData.posheight/this.temporaryData.poswidth);this.temporaryData.poswidth=this.temporaryData.poswidth>=0?this.temporaryData.poswidth+200:this.temporaryData.poswidth-200,this.temporaryData.posheight=this.temporaryData.posheight>=0?Math.abs(this.temporaryData.poswidth*a):-Math.abs(this.temporaryData.poswidth*a),this.temporaryData.opacity=0,this.temporaryData.swipe=!0,this.nextTick()}else this.temporaryData.poswidth=0,this.temporaryData.posheight=0,this.temporaryData.swipe=!1,this.temporaryData.rotate=0},nextTick:function(){var t=this;this.temporaryData.lastPosWidth=this.temporaryData.poswidth,this.temporaryData.lastPosHeight=this.temporaryData.posheight,this.temporaryData.lastRotate=this.temporaryData.rotate,this.temporaryData.currentPage=this.temporaryData.currentPage===this.pages.length-1?0:this.temporaryData.currentPage+1,this.$nextTick(function(){t.temporaryData.poswidth=0,t.temporaryData.posheight=0,t.temporaryData.opacity=1,t.temporaryData.rotate=0}),this.$emit("slideChange",this.temporaryData.currentPage)},onTransitionEnd:function(t){var a=0===this.temporaryData.currentPage?this.pages.length-1:this.temporaryData.currentPage-1;this.temporaryData.swipe&&t===a&&(this.temporaryData.animation=!0,this.temporaryData.lastPosWidth=0,this.temporaryData.lastPosHeight=0,this.temporaryData.lastOpacity=0,this.temporaryData.lastRotate=0,this.temporaryData.swipe=!1)},prev:function(){this.temporaryData.tracking=!1,this.temporaryData.animation=!0;var t=this.$el.offsetWidth;this.temporaryData.poswidth=-t,this.temporaryData.posheight=0,this.temporaryData.opacity=0,this.temporaryData.rotate="-3",this.temporaryData.swipe=!0,this.nextTick()},next:function(){this.temporaryData.tracking=!1,this.temporaryData.animation=!0;var t=this.$el.offsetWidth;this.temporaryData.poswidth=t,this.temporaryData.posheight=0,this.temporaryData.opacity=0,this.temporaryData.rotate="3",this.temporaryData.swipe=!0,this.nextTick()},rotateDirection:function(){return this.temporaryData.poswidth<=0?-1:1},angleRatio:function(){var t=this.$el.offsetHeight;return-1*(2*this.temporaryData.offsetY/t-1)},inStack:function(t,a){for(var e=[],s=this.temporaryData.visible,i=this.pages.length,n=0;n<s;n++)a+n<i?e.push(a+n):e.push(a+n-i);return e.indexOf(t)>=0},transform:function(t){var a=this.temporaryData.currentPage,e=this.pages.length,s=0===a?this.pages.length-1:a-1,i={},n=this.temporaryData.visible;if(t!==this.temporaryData.currentPage){if(this.inStack(t,a)){var r=t-a>0?t-a:t-a+e;i.opacity="1",i.transform="translate3D(0,0,"+-60*(r-this.offsetRatio)+"px)",i.zIndex=n-r,this.temporaryData.tracking||(i[this.temporaryData.prefixes.transition+"TimingFunction"]="ease",i[this.temporaryData.prefixes.transition+"Duration"]="300ms")}else t===s?(i.transform="translate3D("+this.temporaryData.lastPosWidth+"px,"+this.temporaryData.lastPosHeight+"px,0px) rotate("+this.temporaryData.lastRotate+"deg)",i.opacity=this.temporaryData.lastOpacity,i.zIndex=-1,i[this.temporaryData.prefixes.transition+"TimingFunction"]="ease",i[this.temporaryData.prefixes.transition+"Duration"]="300ms"):(i.zIndex="-1",i.transform="translate3D(0,0,"+-1*n*60+"px)");return i}},transformIndex:function(t){if(t===this.temporaryData.currentPage){var a={};return a.transform="translate3D("+this.temporaryData.poswidth+"px,"+this.temporaryData.posheight+"px,0px) rotate("+this.temporaryData.rotate+"deg)",a.opacity=this.temporaryData.opacity,a.zIndex=10,this.temporaryData.animation&&(a[this.temporaryData.prefixes.transition+"TimingFunction"]="ease",a[this.temporaryData.prefixes.transition+"Duration"]=(this.temporaryData.animation?300:0)+"ms"),a}}}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"stack"},t._l(t.pages,function(a,s){return e("li",{directives:[{name:"show",rawName:"v-show",value:!a.read,expression:"!item.read"}],key:s,staticClass:"stack-item",style:[t.transformIndex(s),t.transform(s)],on:{touchmove:t.touchmove,touchstart:t.touchstart,touchend:t.touchend,touchcancel:t.touchend,mousedown:function(a){return a.stopPropagation(),a.preventDefault(),t.touchstart(a)},mouseup:function(a){return a.stopPropagation(),a.preventDefault(),t.touchend(a)},mousemove:function(a){return a.stopPropagation(),a.preventDefault(),t.touchmove(a)},mouseout:function(a){return a.stopPropagation(),a.preventDefault(),t.touchend(a)},"webkit-transition-end":function(a){t.onTransitionEnd(s)},transitionend:function(a){t.onTransitionEnd(s)}}},[e("div",{staticClass:"img-wrap"},[e("StampWrap",{attrs:{imgSrc:a.image,level:a.score,frame:!0,type:"large",padding:60,"v-padding":40,stamp:a}}),t._v(" "),e("div",{staticClass:"tag"}),t._v(" "),e("div",{staticClass:"hq"})],1),t._v(" "),e("div",{staticClass:"stamp-info"},[e("div",{staticClass:"title"},[e("span",{staticClass:"name"},[t._v(t._s("-"!=a.name?a.name:a.set_name)+",")]),e("span",{staticClass:"age"},[t._v(t._s(a.year))])]),t._v(" "),e("div",{staticClass:"detail"},[e("span",{staticClass:"grade"},[t._v("品相等级: "+t._s(a.score))]),e("span",{staticClass:"count"},[t._v("剩余量 "+t._s(a.remain)+"/"+t._s(a.volume))])])])])}))},staticRenderFns:[]};var _=e("VU/8")(v,f,!1,function(t){e("gEYj")},null,null).exports,g={name:"CoinCounter",data:function(){return{counters:[36,36,36,36,36,36]}},methods:{setNum:function(t){var a=t.toString().split("").map(function(t){return parseInt(t)}).reverse(),e=Array(6).fill(0);for(var s in a){if(s>=e.length)break;e[s]=a[s]}e=e.reverse(),this.counters=this.counters.map(function(t,a){for(var s=36*(e[a]+1)%360,i=t;i%360!==s;)i+=36;return i})}},props:{number:Number},watch:{number:function(t,a){this.setNum(t)}},mounted:function(){this.setNum(0)}},b={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"coin-counter"},[a("div",{staticClass:"coin-img"}),this._v(" "),this._l(this.counters,function(t,e){return a("div",{key:e,staticClass:"count-window",style:"background-position: 0 "+t+"px"})})],2)},staticRenderFns:[]};var y={name:"Slide",data:function(){return{currentLoopList:[],stackinit:{visible:3,currentPage:this.$store.state.Slide.currentLoopIndex||0},canReverseTime:3,isFavor:!1,currentPage:0,currentPathArray:[],pathFade:!1,drawing:!1,syncCount:0,askModal:!1}},computed:{currentPath:function(){return this.currentPathArray.length?this.currentPathArray.map(function(t){return t.join(" ")}).join(","):""},isStoreFavor:function(){return this.$store.state.Slide.currentStamp.favor}},mounted:function(){this.currentLoopList=this.$store.state.Slide.currentLoopList;var t=this.$store.state.Slide.preloadList;for(var a in t){(new Image).src="/static/ui/"+t[a]}this.$store.dispatch("refreshCoin"),this.$store.dispatch("changeLoopIndex",0);var e=this;setInterval(function(){e.syncCount&&(1===e.syncCount&&e.$store.dispatch("syncSlideReult"),e.syncCount--)},1e3)},components:{stack:_,CoinCounter:e("VU/8")(g,b,!1,function(t){e("zqab")},"data-v-4b85dcdb",null).exports},methods:{onReverse:function(){this.$store.dispatch("reverseSlide"),this.$emit("reverseSlide")},onPressBad:function(){this.$store.dispatch("setBad"),this.$refs.stack.$emit("prev")},onPressGood:function(){this.$store.dispatch("setGood"),this.$refs.stack.$emit("next")},onFavor:function(){this.isFavor=!this.isFavor,this.isFavor&&(this.askModal=!0),this.$store.dispatch("setFavor",this.isFavor),this.$emit("favor")},stopPropagation:function(t){t.stopPropagation()},actionCollect:function(){this.$store.dispatch("slideCollect",this.$store.state.Slide.currentStamp),this.$refs.stack.$emit("next"),this.askModal=!1},actionBuy:function(){this.$store.dispatch("slideBuy",this.$store.state.Slide.currentStamp),this.$refs.stack.$emit("next"),this.askModal=!1},closeAskModal:function(){this.askModal=!1},slideChange:function(t){this.currentPage=t,this.$store.dispatch("slideRandomCoin");var a=this.$store.state.Slide.randomCoin;this.$store.dispatch("changeLoopIndex",t),this.$store.dispatch("coinIncrease",a),this.syncCount=4,this.isFavor=!1},touchstart:function(t){this.drawing=!0,this.pathFade=!1,this.currentPathArray=[],this.currentPathArray.push([t.changedTouches[0].pageX,t.changedTouches[0].pageY])},touchmove:function(t){this.drawing=!0,this.pathFade=!1,this.currentPathArray.push([t.changedTouches[0].pageX,t.changedTouches[0].pageY])},touchend:function(t){this.drawing=!1,this.pathFade=!0}}},C={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mid-center"},[e("div",{staticClass:"pathSpace",class:t.pathFade?"fade":null},[e("svg",{attrs:{width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[e("polyline",{staticStyle:{fill:"transparent",stroke:"#ffffff33","stroke-width":"12px"},attrs:{points:t.currentPath}}),t._v(" "),e("polyline",{staticStyle:{fill:"transparent",stroke:"#ffffffaa","stroke-width":"10px"},attrs:{points:t.currentPath}}),t._v(" "),e("polyline",{staticStyle:{fill:"transparent",stroke:"#ffffffcc","stroke-width":"8px"},attrs:{points:t.currentPath}}),t._v(" "),e("polyline",{staticStyle:{fill:"transparent",stroke:"#ffffeccc","stroke-width":"6px"},attrs:{points:t.currentPath}}),t._v(" "),e("polyline",{staticStyle:{fill:"transparent",stroke:"#ffffffff","stroke-width":"4px"},attrs:{points:t.currentPath}}),t._v(" "),e("polyline",{staticStyle:{fill:"transparent",stroke:"#23ce7b","stroke-width":"2px"},attrs:{points:t.currentPath}})])]),t._v(" "),e("CoinCounter",{attrs:{number:t.$store.state.Money.coins}}),t._v(" "),e("div",{staticClass:"stack-wrapper",on:{touchmove:function(a){return a.stopPropagation(),a.preventDefault(),t.touchmove(a)},touchstart:function(a){return a.stopPropagation(),a.preventDefault(),t.touchstart(a)},touchend:function(a){return a.stopPropagation(),a.preventDefault(),t.touchend(a)},touchcancel:function(a){return a.stopPropagation(),a.preventDefault(),t.touchend(a)}}},[e("stack",{ref:"stack",attrs:{pages:t.currentLoopList,stackinit:t.stackinit},on:{slideChange:t.slideChange}})],1),t._v(" "),e("div",{staticClass:"controls"},[e("button",{staticClass:"button bad small",on:{click:t.onPressBad}}),t._v(" "),e("button",{staticClass:"button reverse",class:t.$store.state.Slide.canReverseTime>0?"active":null,on:{click:t.onReverse}}),t._v(" "),e("button",{staticClass:"button favor",class:t.isFavor?"active":null,on:{click:t.onFavor}}),t._v(" "),e("button",{staticClass:"button good small",on:{click:t.onPressGood}})]),t._v(" "),t.askModal?e("div",{staticClass:"ask-modal",on:{click:t.closeAskModal}},[e("div",{staticClass:"modal-center",on:{click:t.stopPropagation}},[e("div",{staticClass:"favor-icon"}),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"text"},[t._v("花费元宝")]),t._v(" "),e("div",{staticClass:"text"},[e("span",{staticClass:"icon ingot-icon"}),t._v(" x "+t._s(Math.ceil(t.$store.state.Slide.currentStamp.floor)))]),t._v(" "),e("div",{staticClass:"action-btn theme-btn white",on:{click:t.actionCollect}},[t._v("收藏五天")])]),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"text"},[t._v("花费以太币")]),t._v(" "),e("div",{staticClass:"text"},[e("span",{staticClass:"icon eth-icon"}),t._v(" x "+t._s(Math.ceil(100*t.$store.state.Slide.currentStamp.floor)/100))]),t._v(" "),e("div",{staticClass:"action-btn theme-btn green",on:{click:t.actionBuy}},[t._v("直接购买")])]),t._v(" "),e("div",{staticClass:"close-btn",on:{click:t.closeAskModal}})])]):t._e()],1)},staticRenderFns:[]};var T=e("VU/8")(y,C,!1,function(t){e("Ktz1")},"data-v-1c9cd426",null).exports,S={name:"AlbumWrap",components:{StampWrap:h},data:function(){return{padding:22,isiOS:!1}},props:{year:Number,name:String,completeCollected:Boolean,lock:Boolean,coverUrl:String,type:String},mounted:function(){"trade"===this.type&&(this.padding=14);var t=navigator.userAgent.toLowerCase();this.isiOS=t.indexOf("iphone")>=0},methods:{click:function(){this.$emit("click")}}},k={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"album",staticClass:"album-item",class:t.lock?"lock":null,on:{click:t.click}},[e("img",{staticClass:"album-cover-bg",class:t.isiOS?null:"blur",attrs:{src:t.coverUrl,alt:""}}),t._v(" "),t.isiOS?e("div",{staticClass:"back-drop"}):t._e(),t._v(" "),e("div",{staticClass:"img-wrap"},[e("StampWrap",{attrs:{imgSrc:t.coverUrl,type:"thumb",padding:t.padding}})],1),t._v(" "),e("div",{staticClass:"album-name"},[t._v(t._s(t.name))]),t._v(" "),e("div",{staticClass:"album-year"},[t._v(t._s(t.year))]),t._v(" "),t.completeCollected?e("div",{staticClass:"album-complete",class:t.type},[e("div",{staticClass:"cp-tag"},[t._v("齐")]),t._v(" "),e("div",{staticClass:"cp-tag"},[t._v("全")]),t._v(" "),e("div",{staticClass:"cp-tag"},[t._v("套")])]):t._e()])},staticRenderFns:[]};var D=e("VU/8")(S,k,!1,function(t){e("hsQB")},null,null).exports,L={name:"Album",components:{StampWrap:h,AlbumWrap:D},data:function(){return{currentAlbumTab:"collected",pageLevel:"album",sort:"recent",multiple:!1,single:!1,set:null,currentStamp:{},currentMultiple:[],unlockModal:!1,unlockId:0,buyModal:!1,recycleModal:!1,sellIds:[],sellPrice:0,sellDefaultPrice:100,sellModal:!1}},mounted:function(){},computed:{currentAlbum:function(){return"year"===this.currentAlbumTab?this.$store.state.Album.yearBook:"bought"===this.currentAlbumTab?this.$store.state.Album.boughtBook:"collected"===this.currentAlbumTab?this.$store.state.Album.collectBook:[]},currentSerial:function(){if(null==this.set)return[];var t=[],a=void 0;for(var e in a="year"===this.currentAlbumTab?this.$store.state.Album.allStamp:"collected"===this.currentAlbumTab?this.$store.state.Album.collectList:this.$store.state.Album.finalBoughtList)a[e].set===this.set&&t.push(a[e]);return t}},methods:{switchTab:function(t){this.currentAlbumTab=t},checkAlbum:function(t,a){if(a)for(var e in this.unlockModal=!0,this.$store.state.Album.yearBook)this.$store.state.Album.yearBook[e].set===t&&(this.unlockId=this.$store.state.Album.yearBook[e].id);else this.set=t,this.setName=this.$store.state.Album.yearBook[this.set].set_name,this.pageLevel="serial"},backToAlbum:function(t){this.pageLevel="album"},swithSort:function(t){this.sort=t},multipleClick:function(t,a){this.currentMultiple=a;var e=this;this.openMultiple(t);var s=t.pageX,i=t.pageY;setTimeout(function(){var t=e.$refs.mItem,a=t[0].offsetHeight,n=t[0].offsetWidth;for(var r in t){var o=t[r].getBoundingClientRect().y,c=t[r].getBoundingClientRect().x,l=s-n/2-c,u=i-a/2-o;t[r].style.transform="translate3d("+l+"px,"+u+"px, 0)scale(0.7)",t[r].style.webkitTransform="translate3d("+l+"px,"+u+"px, 0)scale(0.7)"}setTimeout(function(){for(var a in t)t[a].style.transition="all 0.3s ease-out",t[a].style.webkitTransition="all 0.3s ease-out",t[a].style.transform="translate3d(0,0,0)",t[a].style.webkitTransform="translate3d(0,0,0)",t[a].style.opacity="1"},0)},300)},openMultiple:function(t){this.multiple=!0},openSingle:function(t){this.currentStamp=t,this.single=!0},closeMultiple:function(t){this.multiple=!1},closeSingle:function(t){this.single=!1;var a=this;setTimeout(function(){if(a.multiple){var t=a.$refs.mItem;for(var e in t)t[e].style.transition="all 0.3s ease-out",t[e].style.webkitTransition="all 0.3s ease-out",t[e].style.opacity="1"}},200)},closeUnlockModal:function(){this.unlockModal=!1},unlockAlbum:function(){this.$store.dispatch("unlockBook",this.unlockId),this.unlockModal=!1,this.actionRefresh()},actionRefresh:function(){var t=this.currentAlbumTab,a=this;this.currentAlbumTab="",setTimeout(function(){a.currentAlbumTab=t},200)},openBuyModal:function(t){this.buyModal=!0,t.stopPropagation()},closebuyModal:function(){this.buyModal=!1},buyStamp:function(t){this.buyModal=!1,this.single=!1,this.$store.dispatch("albumBuyStamp",this.currentStamp),t.stopPropagation()},openRecycleModal:function(t){this.recycleModal=!0,t.stopPropagation()},closeRecycleModal:function(){this.recycleModal=!1},recycleStamp:function(t){this.recycleModal=!1,this.single=!1,this.$store.dispatch("albumRecycleStamp",this.currentStamp),t.stopPropagation()},openSellModal:function(t){this.sellPrice=this.sellDefaultPrice,this.sellModal=!0;var a=0;if(this.single)this.sellIds=[this.currentStamp.id],a+=this.currentStamp.floor;else for(var e in this.currentSerial){var s=this.currentSerial[e];if(s.multiple)for(var i in s.list)this.sellIds.push(s.list[i].id),a+=s.list[i].floor;else this.sellIds.push(s.id),a+=s.floor}this.sellPrice=Math.ceil(a),t.stopPropagation()},closeSellModal:function(){this.sellModal=!1},priceChange:function(t){this.sellPrice=parseInt(t.target.value)},sellStamp:function(){this.$store.dispatch("createDeal",{stampIds:this.sellIds,price:this.sellPrice}),this.actionRefresh(),this.sellModal=!1,this.single=!1}}},w={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mid-center"},["album"==t.pageLevel?e("div",{staticClass:"album-page"},[e("div",{staticClass:"tabs"},[e("div",{staticClass:"tab-item",class:"collected"==t.currentAlbumTab?"active":null,on:{click:function(a){t.switchTab("collected")}}},[t._v("已收藏")]),t._v(" "),e("div",{staticClass:"tab-item",class:"bought"==t.currentAlbumTab?"active":null,on:{click:function(a){t.switchTab("bought")}}},[t._v("已购买")]),t._v(" "),e("div",{staticClass:"tab-item",class:"year"==t.currentAlbumTab?"active":null,on:{click:function(a){t.switchTab("year")}}},[t._v("年鉴")])]),t._v(" "),e("div",{staticClass:"album-page--wrapper"},["year"!=t.currentAlbumTab?e("div",{staticClass:"sort"},[e("div",{staticClass:"sort-option",class:"year"==t.sort?"active":null,on:{click:function(a){t.swithSort("year")}}},[t._v("发布年份")]),t._v(" "),e("div",{staticClass:"sort-option",class:"recent"==t.sort?"active":null,on:{click:function(a){t.swithSort("recent")}}},[t._v("最近查看")])]):t._e(),t._v(" "),e("div",{staticClass:"album-page--scroll"},[t._l(t.currentAlbum,function(a,s){return"year"!=t.currentAlbumTab&&a.lock?t._e():[a.yearStart&&"year"==t.currentAlbumTab?e("div",{key:"time_"+s,staticClass:"year-folder"},[t._v(t._s(a.year))]):t._e(),t._v(" "),e("div",{key:"album_"+s,staticClass:"album-wrap"},[e("AlbumWrap",{attrs:{name:a.set_name,year:a.year,coverUrl:a.image,lock:a.lock},on:{click:function(e){t.checkAlbum(a.set,a.lock)}}})],1)]})],2)])]):t._e(),t._v(" "),"serial"==t.pageLevel?e("div",{staticClass:"serial-page"},[e("div",{staticClass:"back",on:{click:t.backToAlbum}}),t._v(" "),"bought"==t.currentAlbumTab?e("div",{staticClass:"action-btn",on:{click:t.openSellModal}},[t._v("出售全套")]):t._e(),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.setName))]),t._v(" "),e("div",{staticClass:"serial-page--wrapper"},[e("div",{staticClass:"serial-page--shelf"},t._l(t.currentSerial,function(a,s){return e("div",{key:"stamp_"+s,staticClass:"stamp-item"},[a.multiple?e("div",{key:"stamp_img_"+s,staticClass:"multiple-wrap"},t._l(a.list,function(s,i){return e("div",{key:"stp_img_"+i,staticClass:"img-wrap",on:{click:function(e){t.multipleClick(e,a.list)}}},[e("StampWrap",{attrs:{imgSrc:s.image,type:"list",frame:!0,level:s.score,stamp:a}})],1)})):e("div",{staticClass:"img-wrap",on:{click:function(e){t.openSingle(a)}}},[e("StampWrap",{key:"stamp_img_"+s,attrs:{imgSrc:a.image,type:"list",frame:!0,level:a.score,stamp:a}})],1),t._v(" "),a.expire?e("div",{staticClass:"expire"},[t._v(t._s(a.expire))]):t._e()])}))])]):t._e(),t._v(" "),t.multiple&&!t.single?e("div",{staticClass:"multiple-page",on:{click:t.closeMultiple}},t._l(t.currentMultiple,function(a,s){return e("div",{key:"multiple_"+s,ref:"mItem",refInFor:!0,staticClass:"stamp-transformer"},[e("div",{staticClass:"stamp-item"},[e("div",{staticClass:"img-wrap",on:{click:function(e){t.openSingle(a)}}},[e("StampWrap",{attrs:{imgSrc:a.image,type:"list",frame:!0,level:a.score,stamp:a}})],1),t._v(" "),a.expire?e("div",{staticClass:"expire"},[t._v(t._s(a.expire))]):t._e()])])})):t._e(),t._v(" "),t.single?e("div",{staticClass:"single-page",on:{click:t.closeSingle}},[e("div",{staticClass:"single-wrap"},[e("div",{staticClass:"img-warp"},[e("StampWrap",{attrs:{imgSrc:t.currentStamp.image,level:t.currentStamp.score,type:"large",frame:!0,padding:60,"v-padding":30,stamp:t.currentStamp}})],1),t._v(" "),e("div",{staticClass:"single-detail"},[e("div",{staticClass:"stamp-title"},[t._v(t._s("-"!=t.currentStamp.name?t.currentStamp.name:t.currentStamp.set_name)+", "+t._s(t.currentStamp.year))]),t._v(" "),e("div",{staticClass:"stamp-counts"},["year"!=t.currentAlbumTab?e("span",{staticClass:"level"},[t._v("品相："+t._s(t.currentStamp.score))]):t._e(),t._v(" "),e("span",{staticClass:"type"},[t._v(t._s(t.currentStamp.type))]),t._v(" "),e("span",{staticClass:"num"},[t._v("剩余量："+t._s(t.currentStamp.remain)+"/"+t._s(t.currentStamp.volume))])]),t._v(" "),e("div",{staticClass:"stamp-desc"},[t._v(t._s(t.currentStamp.expain))]),t._v(" "),"year"!=t.currentAlbumTab?[t.currentStamp.boughtType?e("div",{staticClass:"stamp-action"},[e("span",{staticClass:"action-btn green",on:{click:t.openSellModal}},[t._v("交易")]),t._v(" "),e("span",{staticClass:"action-btn white wide",on:{click:t.openRecycleModal}},[t._v("出售给平台")]),t._v(" "),"collect"==t.currentStamp.boughtType?e("span",{staticClass:"action-text green"},[t._v("已获得（收藏满一个月）")]):t._e(),t._v(" "),"buy"==t.currentStamp.boughtType?e("span",{staticClass:"action-text green"},[t._v("已于"+t._s(t.currentStamp.buyTime)+"购买")]):t._e()]):t.currentStamp.trading?e("div",{staticClass:"stamp-action"},[e("span",{staticClass:"action-text"},[t._v("交易中")])]):e("div",{staticClass:"stamp-action"},[e("span",{staticClass:"action-btn green",on:{click:t.openBuyModal}},[t._v("购买")]),t._v(" "),e("span",{staticClass:"action-text"},[t._v(t._s(t.currentStamp.expire))])])]:t._e()],2),t._v(" "),e("div",{staticClass:"single-close",on:{click:t.closeSingle}})])]):t._e(),t._v(" "),t.unlockModal?e("div",{staticClass:"modal unlock-modal"},[e("div",{staticClass:"modal-center"},[t._m(0),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"theme-btn action-btn white",on:{click:t.closeUnlockModal}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"theme-btn action-btn green",on:{click:t.unlockAlbum}},[t._v("确定")])])])]):t._e(),t._v(" "),t.buyModal?e("div",{staticClass:"modal buy-modal"},[e("div",{staticClass:"modal-center"},[e("div",{staticClass:"modal-text"},[e("p",[t._v("将花费以太币")]),t._v(" "),e("p",[e("span",{staticClass:"eth-icon"}),t._v(" x "+t._s(Math.ceil(1e3*t.currentStamp.floor)/1e3))]),t._v(" "),e("p",[t._v("购买该邮票")])]),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"theme-btn action-btn white",on:{click:t.closebuyModal}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"theme-btn action-btn green",on:{click:t.buyStamp}},[t._v("确定")])])])]):t._e(),t._v(" "),t.recycleModal?e("div",{staticClass:"modal recycle-modal"},[e("div",{staticClass:"modal-center"},[e("div",{staticClass:"modal-text"},[e("p",[t._v("出售给平台获得元宝")]),t._v(" "),e("p",[e("span",{staticClass:"ingot-icon"}),t._v(" x "+t._s(Math.ceil(t.currentStamp.floor)))]),t._v(" "),e("p",{staticClass:"tip"},[t._v("出售给平台只能获得元宝")])]),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"theme-btn action-btn white",on:{click:t.closeRecycleModal}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"theme-btn action-btn green",on:{click:t.recycleStamp}},[t._v("确定")])])])]):t._e(),t._v(" "),t.sellModal?e("div",{staticClass:"modal recycle-modal"},[e("div",{staticClass:"modal-center"},[e("div",{staticClass:"modal-text"},[e("p",[t._v("将以下列价格出售该邮票")]),t._v(" "),e("p",[e("span",{staticClass:"eth-icon"}),t._v(" x "),e("input",{attrs:{type:"text"},domProps:{value:t.sellPrice},on:{change:t.priceChange}})]),t._v(" "),e("p",{staticClass:"tip"},[t._v("平台将收取售价1%作为交易手续费")])]),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"theme-btn action-btn white",on:{click:t.closeSellModal}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"theme-btn action-btn green",on:{click:t.sellStamp}},[t._v("确定")])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-text"},[a("p",[this._v("将花费铜钱")]),this._v(" "),a("p",[a("span",{staticClass:"coins-icon"}),this._v(" x 1000")]),this._v(" "),a("p",[this._v("解锁该邮册")])])}]};var x=e("VU/8")(L,w,!1,function(t){e("d5Qz")},"data-v-4bf0555e",null).exports,A={name:"Trade",components:{StampWrap:h,AlbumWrap:D},data:function(){return{tradeDisplayMulti:[],tradeDisplaySingle:{},currentTab:"buy",currentTag:"hot_stamp",showSingle:!1,showMultiple:!1,buyTags:[],hotTags:[],hotStampFilter:null,cancelModal:!1,cancelId:0,buyModal:!1,buyItem:{tradeId:0,price:0}}},computed:{tradeDisplayStamp:function(){var t=this;return"sell"===this.currentTab&&"onsell_stamp"===this.currentTag?this.$store.state.Trade.sellListSingle.map(function(t){var a=t.stamps[0];return a.price=t.price,a.trade_id=t.id,a}):"buy"===this.currentTab&&"hot_stamp"===this.currentTag?this.$store.state.Trade.buyListSingle.map(function(t){var a=t.stamps[0];return a.price=t.price,a.trade_id=t.id,a}).filter(function(t,a,e){return a===e.map(function(t){return t.atlas_id}).indexOf(t.atlas_id)}):"buy"===this.currentTab&&this.currentTag.indexOf("hot_")<0&&!this.hotStampFilter?this.$store.state.Trade.buyListSingle.map(function(t){var a=t.stamps[0];return a.price=t.price,a.trade_id=t.id,a}).filter(function(a){return a.set===t.currentTag}):[]},tradeDisplayAlbum:function(){return"sell"===this.currentTab&&"onsell_album"===this.currentTag?this.$store.state.Trade.sellListAlbum.map(function(t){var a=t.stamps[0];return a.price=t.price,a.stamps=t.stamps,a.trade_id=t.id,a}):"buy"===this.currentTab&&"hot_album"===this.currentTag?this.$store.state.Trade.buyListAlbum.map(function(t){var a=t.stamps[0];return a.price=t.price,a.stamps=t.stamps,a.trade_id=t.id,a}):[]},serialTags:function(){return this.$store.state.Trade.buyListSingle.map(function(t){var a=t.stamps[0];return{set:a.set,set_name:a.set_name}}).filter(function(t,a,e){return e.map(function(t){return t.set}).indexOf(t.set)===a})}},methods:{switchTab:function(t){this.currentTab=t,this.currentTag="buy"===t?"hot_stamp":"onsell_stamp"},clickTag:function(t){this.currentTag=t},toggleSingle:function(t,a){a&&(this.tradeDisplaySingle=a),this.showSingle=t},toggleMultiple:function(t,a){a&&(this.tradeDisplayMulti=a),this.showMultiple=t},closeCancelModal:function(){this.cancelModal=!1},openCancelModal:function(t,a){t.stopPropagation(),this.cancelId=a,this.cancelModal=!0},cancelTrade:function(){this.$store.dispatch("cancelTrade",this.cancelId),this.cancelModal=!1},openBuyModal:function(t,a){var e=a.tradeId,s=a.price;t.stopPropagation(),console.log(e,s),this.buyItem={tradeId:e,price:s},this.buyModal=!0},closeBuylModal:function(){this.buyModal=!1},acceptTrade:function(){this.$store.dispatch("acceptTrade",this.buyItem.tradeId),this.buyModal=!1}}},E={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mid-center"},[e("div",{staticClass:"trade-tab"},[e("div",{staticClass:"tab-item",class:"buy"==t.currentTab?"active":null,on:{click:function(a){t.switchTab("buy")}}},[t._v("购买")]),t._v(" "),e("div",{staticClass:"tab-item",class:"sell"==t.currentTab?"active":null,on:{click:function(a){t.switchTab("sell")}}},[t._v("出售中")])]),t._v(" "),e("div",{staticClass:"trade-page"},[e("div",{staticClass:"category"},["buy"==t.currentTab?e("div",{staticClass:"group"},[e("div",{staticClass:"group-label"},[t._v("热门")]),t._v(" "),e("div",{staticClass:"group-item",class:"hot_stamp"==t.currentTag?"active":null,on:{click:function(a){t.clickTag("hot_stamp")}}},[t._v("热门单张")]),t._v(" "),e("div",{staticClass:"group-item",class:"hot_album"==t.currentTag?"active":null,on:{click:function(a){t.clickTag("hot_album")}}},[t._v("热门套票")])]):t._e(),t._v(" "),"buy"==t.currentTab?e("div",{staticClass:"group"},[e("div",{staticClass:"group-label"},[t._v("系列")]),t._v(" "),t._l(t.serialTags,function(a,s){return e("div",{key:"tag_"+s,staticClass:"group-item set",class:t.currentTag==a.set?"active":null,on:{click:function(e){t.clickTag(a.set)}}},[t._v(t._s(a.set_name))])})],2):t._e(),t._v(" "),"sell"==t.currentTab?e("div",{staticClass:"group"},[e("div",{staticClass:"group-label"},[t._v("出售中")]),t._v(" "),e("div",{staticClass:"group-item",class:"onsell_stamp"==t.currentTag?"active":null,on:{click:function(a){t.clickTag("onsell_stamp")}}},[t._v("单张")]),t._v(" "),e("div",{staticClass:"group-item",class:"onsell_album"==t.currentTag?"active":null,on:{click:function(a){t.clickTag("onsell_album")}}},[t._v("套票")])]):t._e()]),t._v(" "),e("div",{staticClass:"trade-wrap"},[e("div",{staticClass:"trade-wrap--scroll"},[t.currentTag.indexOf("_album")>0?t._l(t.tradeDisplayAlbum,function(a,s){return e("div",{key:"trade_"+s,staticClass:"trade-item list",on:{click:function(e){t.toggleMultiple(!0,a.stamps)}}},[e("div",{staticClass:"image-wrap"},[e("AlbumWrap",{attrs:{coverUrl:a.image,type:"trade",completeCollected:a.completeCollected}})],1),t._v(" "),e("div",{staticClass:"stamp-detail"},[e("div",{staticClass:"name"},[t._v(t._s(a.set_name))]),t._v(" "),e("div",{staticClass:"type"},[t._v("套票")]),t._v(" "),e("div",{staticClass:"price"},[t._v(t._s(a.price))])]),t._v(" "),t.currentTag.indexOf("sold_")?t._e():e("div",{staticClass:"seller-detail"},[e("div",{staticClass:"seller-head"}),t._v(" "),e("div",{staticClass:"seller-name"},[t._v("seller")])]),t._v(" "),"buy"==t.currentTab?e("div",{staticClass:"btn buy",on:{click:function(e){t.openBuyModal(e,{tradeId:a.trade_id,price:a.price})}}},[t._v("购买")]):t._e(),t._v(" "),0==t.currentTag.indexOf("onsell_")?e("div",{staticClass:"btn buy",on:{click:function(e){t.openCancelModal(e,a.trade_id)}}},[t._v("下架")]):t._e(),t._v(" "),0==t.currentTag.indexOf("sold_")?e("div",{staticClass:"btn sold"},[t._v("已出售")]):t._e()])}):"hot_stamp"==t.currentTag?t._l(t.tradeDisplayStamp,function(a,s){return e("div",{key:"trade_"+s,staticClass:"trade-item stamp",on:{click:function(e){t.clickTag(a.set)}}},[e("div",{staticClass:"image-wrap album"},[e("StampWrap",{attrs:{imgSrc:a.image,type:"list",frame:!0,level:a.score,padding:2}})],1)])}):t._l(t.tradeDisplayStamp,function(a,s){return e("div",{key:"trade_"+s,staticClass:"trade-item list"},[e("div",{staticClass:"stamp-list-item",on:{click:function(e){t.toggleSingle(!0,a)}}},[e("div",{staticClass:"image-wrap"},[e("StampWrap",{attrs:{imgSrc:a.image,type:"list",frame:!0,level:a.score,padding:6,"v-padding":1,stamp:a}})],1),t._v(" "),e("div",{staticClass:"stamp-detail"},[e("div",{staticClass:"name"},[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"level"},[t._v("品相:"+t._s(a.score))]),t._v(" "),e("div",{staticClass:"type"},[t._v("邮册:"+t._s(a.set_name))]),t._v(" "),e("div",{staticClass:"price"},[t._v(t._s(a.price))])]),t._v(" "),t.currentTag.indexOf("sold_")?t._e():e("div",{staticClass:"seller-detail"},[e("div",{staticClass:"seller-head"}),t._v(" "),e("div",{staticClass:"seller-name"},[t._v("seller")])]),t._v(" "),"buy"==t.currentTab?e("div",{staticClass:"btn buy",on:{click:function(e){t.openBuyModal(e,{tradeId:a.trade_id,price:a.price})}}},[t._v("购买")]):t._e(),t._v(" "),0==t.currentTag.indexOf("onsell_")?e("div",{staticClass:"btn buy",on:{click:function(e){t.openCancelModal(e,a.trade_id)}}},[t._v("下架")]):t._e(),t._v(" "),0==t.currentTag.indexOf("sold_")?e("div",{staticClass:"btn sold"},[t._v("已出售")]):t._e()])])})],2)])]),t._v(" "),t.showSingle?e("div",{staticClass:"single-warp",on:{click:function(a){t.toggleSingle(!1)}}},[e("div",{staticClass:"single-center"},[e("StampWrap",{attrs:{imgSrc:t.tradeDisplaySingle.image,type:"large",frame:!0,level:t.tradeDisplaySingle.score,padding:2,stamp:t.tradeDisplaySingle}})],1)]):t._e(),t._v(" "),t.showMultiple?e("div",{staticClass:"multiple-warp",on:{click:function(a){t.toggleMultiple(!1)}}},[e("div",{staticClass:"multiple-center"},[e("div",{staticClass:"multiple-content"},t._l(t.tradeDisplayMulti,function(a,s){return e("div",{key:"multi_"+s,staticClass:"multi-item"},[e("div",{staticClass:"image-wrap"},[e("StampWrap",{attrs:{imgSrc:a.image,type:"large",frame:!0,level:a.score,padding:2,stamp:a}})],1),t._v(" "),e("div",{staticClass:"stamp-detail"},[e("div",{staticClass:"name"},[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"level"},[t._v("品相："+t._s(a.score))])])])}))])]):t._e(),t._v(" "),t.cancelModal?e("div",{staticClass:"modal cancel-modal"},[e("div",{staticClass:"modal-center"},[t._m(0),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"theme-btn action-btn white",on:{click:t.closeCancelModal}},[t._v("返回")]),t._v(" "),e("div",{staticClass:"theme-btn action-btn green",on:{click:t.cancelTrade}},[t._v("确定")])])])]):t._e(),t._v(" "),t.buyModal?e("div",{staticClass:"modal buy-modal"},[e("div",{staticClass:"modal-center"},[e("div",{staticClass:"modal-text"},[e("br"),t._v(" "),e("p",[t._v("将用以下价格进行购买")]),t._v(" "),e("p",[e("span",{staticClass:"eth-icon"}),t._v(" x "+t._s(t.buyItem.price))])]),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"theme-btn action-btn white",on:{click:t.closeBuylModal}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"theme-btn action-btn green",on:{click:t.acceptTrade}},[t._v("确定")])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-text"},[a("br"),this._v(" "),a("p",[this._v("确定要下架这笔交易吗")])])}]};var M=e("VU/8")(A,E,!1,function(t){e("1Juo")},"data-v-95943b32",null).exports,I={name:"Dig",data:function(){return{lastOpenTime:0,lastOpenIndex:0,currentTime:0,openingBox:!1,currentBox:null}},computed:{shouldShowBox:function(){return this.currentTime-this.lastOpenTime>36e5},timer:function(){if(!this.lastOpenTime)return"00:00";var t=3600-Math.floor((this.currentTime-this.lastOpenTime)/1e3),a=Math.floor(t/60),e=t%60;return a>60&&(a=0),a<10&&(a="0"+a),e<10&&(e="0"+e),a+":"+e}},mounted:function(){var t=localStorage.getItem("lastOpenTime");t&&(this.lastOpenTime=parseInt(t)),this.lastOpenTime||(this.lastOpenTime=(new Date).getTime(),localStorage.setItem("lastOpenTime",this.lastOpenTime));var a=this;setInterval(function(){a.currentTime=(new Date).getTime()},500)},methods:{openBox:function(){var t=(new Date).getHours(),a=this.$store.state.Money.chests;this.currentBox=a[t],this.openingBox=!0},getReward:function(){this.lastOpenTime=(new Date).getTime(),localStorage.setItem("lastOpenTime",this.lastOpenTime),this.$store.dispatch("syncChest",this.currentBox),this.$store.dispatch("ingotIncrease",this.currentBox.ingot),this.openingBox=!1}}},O={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mid-center"},[e("div",{staticClass:"ingot-count"},[e("span",{staticClass:"ingot-icon"}),t._v("\n    "+t._s(t.$store.state.Money.ingots)+"\n  ")]),t._v(" "),t.shouldShowBox&&!t.openingBox?e("div",{staticClass:"boxes"},[e("div",{staticClass:"box-item",on:{click:t.openBox}}),t._v(" "),e("div",{staticClass:"box-item",on:{click:t.openBox}}),t._v(" "),e("div",{staticClass:"box-item",on:{click:t.openBox}})]):t._e(),t._v(" "),t.shouldShowBox||t.openingBox?t._e():e("div",{staticClass:"digging"},[e("div",{staticClass:"digging-modal"},[t._m(0),t._v(" "),e("div",{staticClass:"digging-timer"},[t._v(t._s(t.timer))])])]),t._v(" "),t.openingBox?e("div",{staticClass:"opening"},[e("div",{staticClass:"opening-modal"},[e("div",{staticClass:"opening-text"},[t._v("恭喜"),e("br"),t._v("获得"+t._s(t.currentBox.ingot)+"个元宝")]),t._v(" "),e("div",{staticClass:"opening-count"},[e("span",{staticClass:"ingot-icon"}),t._v(" x "+t._s(t.currentBox.ingot))]),t._v(" "),e("div",{staticClass:"reward-btn",on:{click:t.getReward}},[t._v("领取奖励")])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"digging-text"},[this._v("还在挖掘中"),a("br"),this._v("请耐心等候哦")])}]};var P=e("VU/8")(I,O,!1,function(t){e("vRGB")},"data-v-049e36fb",null).exports,B={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mid-center"},[e("div",{staticClass:"user-info"},[t._m(0),t._v(" "),e("div",{staticClass:"user-name"},[t._v(t._s(t.$store.state.User.name))]),t._v(" "),e("div",{staticClass:"user-phone"},[t._v(t._s(t.$store.state.User.phone))]),t._v(" "),e("div",{staticClass:"user-mail"},[t._v(t._s(t.$store.state.User.mail))])]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"user-head"},[a("img",{attrs:{src:"/static/img/2.png",alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"login-out-btn"},[a("div",{staticClass:"action-btn theme-btn white"},[this._v("退出登录")])])}]};var R=e("VU/8")({name:"User",data:function(){return{}},methods:{}},B,!1,function(t){e("Chds")},"data-v-02b1866b",null).exports;s.a.use(u.a);var $=new u.a({routes:[{path:"/",name:"slide",component:T},{path:"/dig",name:"dig",component:P},{path:"/album",name:"album",component:x},{path:"/trade",name:"trade",component:M},{path:"/user",name:"user",component:R}]}),U=e("9rMa"),N=e("2mV7");s.a.use(U.a);var W=new U.a.Store({modules:N.default,strict:!1}),F=e("aozt"),j=e.n(F);s.a.config.productionTip=!1,s.a.http=s.a.prototype.$http=j.a,s.a.use(U.a),new s.a({el:"#app",router:$,store:W,components:{App:l},template:"<App/>"}),W.dispatch("login",{login_id:"balabala",login_password:"aabbcc"}),document.body.addEventListener("touchstart",function(){})},Tdqk:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Gu7T"),i=e.n(s),n=e("7+uW"),r=e("KW+s"),o=e.n(r),c={UPDATE_YEAR_BOOK:function(t,a){var e="";for(var s in t.allStamp=[],t.yearBook=[],a)for(var i in a[s].set_name=a[s].name,a[s].set=a[s].Atlas[0].set,a[s].image=a[s].Atlas[0].image,a[s].year=a[s].Atlas[0].year,a[s].year!==e&&(e=a[s].year,a[s].yearStart=a[s].year),t.yearBook.push(a[s]),t.yearBook[a[s].set]=a[s],a[s].Atlas)t.allStamp.push(a[s].Atlas[i])},CHANGE_LOCK_YEARBOOK:function(t,a){for(var e=a.map(function(t){return t.serial_id}),s=0;s<t.yearBook.length;s++)e.indexOf(t.yearBook[s].id)<0&&(t.yearBook[s].lock=!0)},UPDATE_BOOKS:function(t){t.collectBook=[];var a=t.collectList.filter(function(t,a,e){return e.map(function(t){return t.set}).indexOf(t.set)===a}).sort(function(t,a){return a.year-t.year});for(var e in a)a[e].lock=!1,t.collectBook.push(a[e]);t.boughtList=t.boughtList.map(function(t){return t.boughtType="trade",t}),t.collectBoughtList=t.collectBoughtList.map(function(t){return t.boughtType="collect",t}),t.tradingList=t.tradingList.map(function(t){return t.trading=!0,t});var s=[].concat(i()(t.boughtList),i()(t.collectBoughtList),i()(t.tradingList)).sort(function(t,a){return a.year-t.year});t.finalBoughtList=s,t.boughtBook=[];var n=[];for(var r in s){var o=s[r].set;s[r].lock=!1,null==n[o]&&(n.push(s[r]),n[o]=s[r])}t.boughtBook=n;var c={};for(var l in t.collectList){var u=t.collectList[l].atlas_id;null==c[u]?c[u]=[t.collectList[l]]:c[u].push(t.collectList[l])}for(var p in t.collectList=[],c)1===c[p].length?t.collectList.push(c[p][0]):t.collectList.push({multiple:!0,set:c[p][0].set,serial_id:c[p][0].serial_id,list:c[p]});var d={};for(var m in t.finalBoughtList){var h=t.finalBoughtList[m].atlas_id;null==d[h]?d[h]=[t.finalBoughtList[m]]:d[h].push(t.finalBoughtList[m])}for(var v in s=[],d)1===d[v].length?s.push(d[v][0]):s.push({multiple:!0,set:d[v][0].set,serial_id:d[v][0].serial_id,list:d[v]});t.finalBoughtList=s},UPDATE_COLLECT_LIST:function(t,a){if(a)for(var e in t.collectList.length=0,a)t.collectList.push(a[e])},UPDATE_BOUGHT_LIST:function(t,a){if(a)for(var e in t.boughtList.length=0,a)t.boughtList.push(a[e])},UPDATE_COLLECT_BOUGHT_LIST:function(t,a){if(a)for(var e in t.collectBoughtList.length=0,a)t.collectBoughtList.push(a[e])},UPDATE_TRADING_LIST:function(t,a){if(a)for(var e in t.tradingList.length=0,a)t.tradingList.push(a[e])},UNLOCK_SINGLE_BOOK:function(t,a){for(var e in t.yearBook)t.yearBook[e].id===a&&(t.yearBook[e].lock=!1)}},l={getAlbum:function(t){var a=t.commit,e=t.rootState,s=4;n.a.http.post(o.a+"/api/stamp/list",{user_id:e.User.user_id,status:[101]}).then(function(t){t.data.success&&(a("UPDATE_COLLECT_LIST",t.data.result.Stamps),--s||a("UPDATE_BOOKS"))}),n.a.http.post(o.a+"/api/stamp/list",{user_id:e.User.user_id,status:[102]}).then(function(t){t.data.success&&(a("UPDATE_COLLECT_BOUGHT_LIST",t.data.result.Stamps),--s||a("UPDATE_BOOKS"))}),n.a.http.post(o.a+"/api/stamp/list",{user_id:e.User.user_id,status:[103]}).then(function(t){t.data.success&&(a("UPDATE_BOUGHT_LIST",t.data.result.Stamps),--s||a("UPDATE_BOOKS"))}),n.a.http.post(o.a+"/api/stamp/list",{user_id:e.User.user_id,status:[104]}).then(function(t){t.data.success&&(a("UPDATE_TRADING_LIST",t.data.result.Stamps),--s||a("UPDATE_BOOKS"))})},getYearBook:function(t){var a=t.commit,e=t.dispatch,s=t.rootState;n.a.http.post(o.a+"/api/base/all",{user_id:s.User.user_id}).then(function(t){t.data.success&&(a("UPDATE_YEAR_BOOK",t.data.result.All),e("getUnlockBook"))})},getUnlockBook:function(t){var a=t.commit,e=t.rootState;n.a.http.post(o.a+"/api/slot/list",{user_id:e.User.user_id}).then(function(t){t.data.success&&a("CHANGE_LOCK_YEARBOOK",t.data.result.slots)})},unlockBook:function(t,a){var e=t.commit,s=t.rootState;t.dispatch;n.a.http.post(o.a+"/api/slot/unlock",{user_id:s.User.user_id,serial_id:a}).then(function(t){t.data.success&&e("UNLOCK_SINGLE_BOOK",a)})},albumBuyStamp:function(t,a){t.commit;var e=t.rootState,s=t.dispatch,i={user_id:e.User.user_id,stamp_id:a.id};n.a.http.post(o.a+"/api/stamp/buy",i).then(function(t){t.data.success&&(s("getAlbum"),s("getTrade"))})},albumRecycleStamp:function(t,a){t.commit;var e=t.rootState,s=t.dispatch,i={user_id:e.User.user_id,stamp_id:a.id};n.a.http.post(o.a+"/api/stamp/recycle",i).then(function(t){t.data.success&&(s("getAlbum"),s("getTrade"))})}};a.default={state:{collectList:[],collectBoughtList:[],boughtList:[],tradingList:[],finalBoughtList:[],collectBook:[],boughtBook:[],yearBook:[],allStamp:[]},mutations:c,actions:l}},VLN1:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("KW+s"),i=e.n(s),n=e("7+uW"),r={login:function(t,a){var e=t.commit,s=t.dispatch;n.a.http.post(i.a+"/api/user/login",a).then(function(t){if(t.data.success){var a=t.data.result;e("LOGIN",a),e("UPDATE_COINS",a.coins),e("UPDATE_INGOTS",a.ingots),s("listChests"),s("getLoopSlideInit"),s("getAlbum"),s("getYearBook"),s("getTrade")}})}};a.default={state:{name:"",phone:"",mail:"",user_id:0,login_id:"",login_password:"",network:0},mutations:{LOGIN:function(t,a){t.user_id=a.id,t.name=a.name,t.phone=a.phone,t.mail=a.mail,t.login_id=a.login_id,t.login_password=a.login_password}},actions:r}},d5Qz:function(t,a){},eBgY:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={state:{main:0},mutations:{DECREMENT_MAIN_COUNTER:function(t){t.main--},INCREMENT_MAIN_COUNTER:function(t,a){t.main+=a}},actions:{someAsyncTask:function(t,a){(0,t.commit)("INCREMENT_MAIN_COUNTER",a)}}}},gEYj:function(t,a){},gNcp:function(t,a,e){var s={"./Album.js":"Tdqk","./Counter.js":"eBgY","./Global.js":"MqPO","./Money.js":"EOWH","./Slide.js":"k4m4","./Trade.js":"8lmO","./User.js":"VLN1","./index.js":"2mV7"};function i(t){return e(n(t))}function n(t){var a=s[t];if(!(a+1))throw new Error("Cannot find module '"+t+"'.");return a}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="gNcp"},hsQB:function(t,a){},k4m4:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("KW+s"),i=e.n(s),n=e("7+uW"),r={stamps:[],randomCoin:0,currentStamp:null,currentLoopList:[],currentLoopIndex:0,canReverseTime:localStorage.getItem("reverseCountDate_"+(new Date).toLocaleDateString())||3,start:!1,slideResultList:[],preloadList:["coin.png","coin.w-shadow.png","coinCount.back.png","coinCount.shadow.png","counter.number.jpg","material.gold.jpg","menuAlbum.active.png","menuAlbum.disactive.png","menuDig.active.png","menuDig.disactive.png","menuSlide.active.png","menuSlide.disactive.png","menuTrade.active.png","menuTrade.disactive.png","menuUser.active.png","menuUser.disactive.png","opBad.active.png","opBad.active.pressed.png","opBad.disactive.png","opBad.disactive.pressed.png","opFavor.active.png","opFavor.active.pressed.png","opFavor.disactive.png","opFavor.disactive.pressed.png","opGood.active.png","opGood.active.pressed.png","opGood.disactive.png","opGood.disactive.pressed.png","opReverse.active.png","opReverse.active.pressed.png","opReverse.disactive.png","opReverse.disactive.pressed.png"]},o={START:function(t){t.start=!0},UPDATE_LOOP_LIST:function(t,a){if(0===t.currentLoopList.length){for(var e in a)t.currentLoopList.push(a[e]);t.currentLoopIndex=0}else{var s=void 0;for(var i in s=t.currentLoopIndex>9?0:t.currentLoopIndex>4?10:5,a)t.currentLoopList[(s+i)%15]=a[i]}t.currentStamp=t.currentLoopList[t.currentLoopIndex]},CHANGE_LOOP_INDEX:function(t,a){t.currentStamp&&t.slideResultList.push({stamp_id:t.currentStamp.id,action:t.currentStamp.action,coin:t.randomCoin}),t.currentLoopIndex=a,t.currentStamp=t.currentLoopList[t.currentLoopIndex]},GET_RANDOM_COIN:function(t){t.randomCoin=1+Math.floor(10*Math.random())},SET_BAD:function(t){t.currentStamp.action=0},SET_GOOD:function(t){t.currentStamp.action=1},SET_FAVOR:function(t){t.currentStamp.action=2,null!=t.currentStamp.favor?t.currentStamp.favor=!t.currentStamp.favor:t.currentStamp.favor=!0},SET_BUY:function(t){t.currentStamp.action=3},REVERSE_SLIDE:function(t){if(!(parseInt(t.canReverseTime)<=0)){var a=t.currentLoopList.pop();t.currentLoopList.unshift(a),t.currentStamp=t.currentLoopList[t.currentLoopIndex],t.canReverseTime&&(t.canReverseTime--,localStorage.setItem("reverseCountDate_"+(new Date).toLocaleDateString(),t.canReverseTime))}},SLIDE_AWAY:function(t){var a=t.currentLoopIndex?t.currentLoopIndex-1:14,e=a-4<0?15+a-5:a-4,s=t.currentLoopList[a];t.currentLoopList[a]=t.currentLoopList[e],t.currentLoopList[e]=s},CLEAR_SLIDE_RESULT:function(t){t.slideResultList=[]}},c={getLoopSlideInit:function(t){var a=t.commit,e={user_id:t.rootState.User.user_id,max:15};n.a.http.post(i.a+"/api/sweep/list",e).then(function(t){t.data.success&&a("UPDATE_LOOP_LIST",t.data.result.stamps)})},changeLoopIndex:function(t,a){var e=t.commit,s=t.rootState;if(e("CHANGE_LOOP_INDEX",a),r.start){if(0===a||5===a||10===a){var o={user_id:s.User.user_id,max:5};n.a.http.post(i.a+"/api/sweep/list",o).then(function(t){t.data.success&&(console.log("get 5 more slides"),e("UPDATE_LOOP_LIST",t.data.result.stamps))})}}else e("START")},setGood:function(t){(0,t.commit)("SET_GOOD")},setBad:function(t){(0,t.commit)("SET_BAD")},setBuy:function(t){(0,t.commit)("SET_BUY")},setFavor:function(t){(0,t.commit)("SET_FAVOR")},reverseSlide:function(t){(0,t.commit)("REVERSE_SLIDE")},slideRandomCoin:function(t){(0,t.commit)("GET_RANDOM_COIN")},slideCollect:function(t,a){var e=t.commit,s=t.rootState,r=t.dispatch,o={user_id:s.User.user_id,stamp_id:a.id};n.a.http.post(i.a+"/api/stamp/collect",o).then(function(t){t.data.success&&(e("SLIDE_AWAY"),r("getAlbum"),r("getTrade"))})},slideBuy:function(t,a){var e=t.commit,s=t.rootState,r=t.dispatch,o={user_id:s.User.user_id,stamp_id:a.id};n.a.http.post(i.a+"/api/stamp/buy",o).then(function(t){t.data.success&&(e("SLIDE_AWAY"),r("getAlbum"),r("getTrade"))})},syncSlideReult:function(t){var a=t.commit,e={user_id:t.rootState.User.user_id,coins:r.slideResultList.map(function(t){return t.coin}).reduce(function(t,a){return t+a}),times:r.slideResultList.length,stamps:r.slideResultList};a("CLEAR_SLIDE_RESULT"),n.a.http.post(i.a+"/api/sweep/sync",e).then(function(t){t.data.success&&console.log("slide sync success")})}};a.default={state:r,mutations:o,actions:c}},oUd5:function(t,a){},uuwm:function(t,a){},vRGB:function(t,a){},vkA4:function(t,a){},zqab:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.9a00798dd6ad7e8dd1c1.js.map